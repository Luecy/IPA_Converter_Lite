(()=>{"use strict";let t=new Map([["self",["defineProperty","freezeProperty","$","sleep","downloadFile","canvasToURL","drawImagefileToCanvas"]],["Math",["randomInt"]],["Blob.prototype",["uint8Array","dataURL"]],["String.prototype",["atob","btoa","uint8Array","toUTF16","base16Decode"]],["Uint8Array.prototype",["btoa","text","loop","random","base16Encode"]]]),e=(t,e,r="self",n=!1)=>{let l=t=>{let e=t.split("."),r=self;for(let n of e)r=r[n];return r},o=(t="self",e=[""])=>{"string"==typeof e&&(e=[e]);let r=l(t);for(let n of e)try{if(!0===r.hasOwnProperty(n))throw Error(`[${t}.${n}] is in conflict`)}catch(o){console.error(o)}};!1===Array.isArray(t)&&(t=[t]),!1===Array.isArray(e)&&(e=[e]),o(r,t),r=l(r);for(let a=0;a<e.length;a++)Object.defineProperty(r,t[a],{value:e[a],configurable:n,writable:n,enumerable:!0})},r=[e,(t,e=self)=>{"string"==typeof t&&(t=[t]);for(let r=0;r<t.length;r++)Object.defineProperty(e,t[r],{configurable:!1,enumerable:!0,writable:!1})},t=>{let e=document.querySelectorAll(t);return 1===e.length?e[0]:e},(t=0)=>new Promise(e=>{setTimeout(e,t)}),(t,e="00.txt",r=document.querySelector("a"))=>{"[object Uint8Array]"===toString.call(t)&&(t=new Blob([t]));{let n=URL.createObjectURL(t);""==e&&(e="00.txt"),r.download=e,r.href=n}},(t=document.querySelector("canvas"),e="image/png",r=.85)=>new Promise(n=>{t.toBlob(t=>{let e=URL.createObjectURL(t);n(e)},e,r)}),(t,e=document.querySelector("canvas"),r,n)=>new Promise(l=>{let o=new FileReader;o.readAsDataURL(t),o.onload=()=>{let t=new Image;t.src=o.result,t.onload=()=>{let o=e.getContext("2d");void 0===r&&(r=t.naturalWidth),void 0===n&&(n=t.naturalHeight),e.width=r,e.height=n,o.drawImage(t,0,0,r,n),l()}}}),(t=255,e=0)=>Math.floor(Math.random()*(t-e+1)+e),async function(){let t=await this.arrayBuffer();return new Uint8Array(t)},function(){return new Promise(t=>{let e=new FileReader;e.readAsDataURL(this),e.onload=()=>{t(e.result)}})},function(){let t=atob(this.replace(/.*,/,"")),e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e},async function(){let t=new Blob([this]),e=await t.arrayBuffer(),r=new Uint8Array(e),n="";for(let l of r)n+=String.fromCharCode(l);return btoa(n)},async function(){let t=new Blob([this]),e=await t.arrayBuffer();return new Uint8Array(e)},function(t="BE"){let e=(()=>{let t=Array(this.length);for(let e=0;e<this.length;e++){let r=this.charCodeAt(e);t[e]=r.toString(16).padStart(4,"0")}return t.join("").split("")})``,r=new Uint8Array(2*this.length);for(let n=0,l=0;n<e.length;n++){let o=e[l]+e[l+1];l+=2,r[n]=parseInt(o,16)}if("LE"===t)for(let a=0;a<r.length;a+=2){let i=r[a],f=r[a+1];r[a]=f,r[a+1]=i}return r},function(){let t=this.split(""),e=new Uint8Array(t.length/2);for(let r=0,n=0;r<e.length;r++){let l=t[n]+t[n+1];e[r]=parseInt(l,16),n+=2}return e},function(){let t="";for(let e of this)t+=String.fromCharCode(e);return btoa(t)},function(t="UTF-8"){return"UTF-16"===t&&(t="UTF-16BE"),new Promise(e=>{let r=new Blob([this]),n=new FileReader;n.readAsText(r,t),n.onload=()=>{e(n.result)}})},function(t=0,e=255,r=0,n=this.length-1){let l=t;for(let o=r;o<=n;o++)this[o]=l,++l>e&&(l=t);return this},function(t=0,e=255,r=0,n=this.length-1){for(let l=r;l<=n;l++)this[l]=Math.floor(Math.random()*(e-t+1)+t);return this},function(t="",e=!0,r=!0){let n=Array(this.length);for(let l=0;l<n.length;l++)n[l]=this[l].toString(16),!0===r&&(n[l]=n[l].toUpperCase()),!0===e&&(n[l]=n[l].padStart(2,"0"));return n.join(t)}],n=0;for(let l of t){let o=l[0],a=l[1],i=(()=>{let t=Array(a.length);for(let e=0;e<t.length;e++)t[e]=r[n],n++;return t})``;e(a,i,o)}})``;
defineProperty("mainPromise",new Promise(async e=>{"use strict";let t=$("#sudoku_main"),r=$("#sudoku_number"),n=$("#cui"),l=(()=>{let e=new Uint8Array(81);return e.focus=-1,e.allClear=()=>{for(let t=0;t<81;t++)e[t]=0},e.changeMass=(t,r)=>{e[t]=r},e.load=t=>{for(let r=0;r<t.length;r++)e[r]=t[r]},e})``,u=(()=>{let e=self.localStorage,t="numberPlace",r={save(){let r="";for(let n of l)r+=n;e[t]=r},load(){let r=e[t];for(let n=0;n<l.length;n++)l[n]=r[n]}};{let n=e[t];if(void 0==n&&(n=""),!n.match(/^\d{81}$/)){let u="";for(let a=0;a<81;a++)u+="0";e[t]=u}}return r})``,a=await (async()=>{let e=Array(10),t=["../texture/background.png","../texture/1.png","../texture/2.png","../texture/3.png","../texture/4.png","../texture/5.png","../texture/6.png","../texture/7.png","../texture/8.png","../texture/9.png"],r=e=>{let r=new Image;return r.src=t[e],new Promise(e=>{r.onload=()=>{e(r)}})};for(let n=0;n<=9;n++)e[n]=await r(n);return e})``,o=(()=>{let e=a[0].width;return t.width=e,t.height=e,t.getContext("2d")})``;defineProperty("constant.js",Object.freeze({canvas:t,canvas2:r,cui:n,state:l,storage:u,img:a,context:o})),e()}),"self",!0);
(async()=>{"use strict";await self.mainPromise,self.mainPromise=new Promise(async e=>{let{state:l,storage:f,img:t,context:_}=self["constant.js"],r=(()=>{let e=[[4,4],[178,4],[352,4],[4,178],[178,178],[352,178],[4,352],[178,352],[352,352]],l=[[0,0],[57,0],[114,0],[0,57],[57,57],[114,57],[0,114],[57,114],[114,114]];return f=>{let t=Math.floor(f/9),_=f%9,r=e[t][0]+l[_][0],a=e[t][1]+l[_][1];return[r,a]}})``,a=(()=>{let e=e=>{let[f,t]=r(e);_.fillStyle="#ffffff",_.fillRect(f,t,56,56),l.changeMass(e,0)};return(a,s)=>{if(-1===a)_.drawImage(t[0],0,0),l.allClear();else{if(0===s)e(a);else{let[i,n]=r(a);_.drawImage(t[s],i,n),l.changeMass(a,s)}f.save()}}})``,s=()=>{for(let e=0;e<l.length;e++)a(e,l[e])},i=(()=>{let e=(e,l)=>{_.fillRect(e,l,56,2),_.fillRect(e,l+54,56,2),_.fillRect(e,l,2,56),_.fillRect(e+54,l,2,56)},f=l=>{let[f,t]=r(l);_.fillStyle="orange",e(f,t)},t=()=>{if(-1===l.focus)return;let[f,t]=r(l.focus);_.fillStyle="#ffffff",e(f,t)};return e=>{-1===e?t():(t(),f(e)),l.focus=e}})``;defineProperty("function.js",Object.freeze({getPosition:r,drawMass:a,loadData:s,focus:i})),e()})})``;
(async()=>{"use strict";await self.mainPromise,self.mainPromise=new Promise(async e=>{let{canvas:l,canvas2:t,cui:a,state:n,img:c,context:i}=self["constant.js"],{drawMass:o,loadData:u,focus:f}=self["function.js"];a.oninput=(()=>{let e={help:/^help\n$/,draw:/^\d\d\d?\n$/,allClear:/^0\n$/,save:/^\n$/,load:/^\d{81}\n$/,focus:/^focus\d\d?\n$/};return()=>{if(a.value.match(e.help)){let l=Object.keys(e),t="";for(let c=0;c<l.length;c++)t+=`${l[c]}: ${e[l[c]]}
`;a.value=t}else if(a.value.match(e.draw)){let i=String(a.value.match(/^\d\d\d?/)),r,d;2===i.length?(r=Number(i[0]),d=Number(i[1])):3===i.length&&(r=Number(i[0]+i[1]),d=Number(i[2])),o(r,d),a.value=a.value.replace(/\n$/,"")}else if(a.value.match(e.allClear))o(-1),a.value=a.value.replace(/\n$/,"");else if(a.value.match(e.save)){let h="";for(let s of n)h+=s;a.value=h}else if(a.value.match(e.load)){let $=String(a.value.match(/^\d{81}/));n.load($),u(),a.value=""}else if(a.value.match(e.focus)){let _=Number(a.value.match(/\d\d?/));81===_&&(_=-1),f(_),a.value=a.value.replace(/\n$/,"")}}})``,l.onclick=(()=>{let e=(e,l)=>{let t=-1,a=-1,n=0;for(let c=0;c<3;c++){for(let i=0;i<3;i++){for(let o=0;o<3;o++){for(let u=0;u<3;u++)if(a++,t++,a===e&&n===l)return t;a-=3,n++}a+=3,n-=3}a=-1,n+=3}},[t,a]=(()=>{let e=l.getBoundingClientRect(),t=e.left,a=e.top;return[t,a]})``,c=Math.ceil(l.clientWidth/9);return l=>{let i=l.pageX-t,o=l.pageY-a;i=Math.floor(i/c),o=Math.floor(o/c);{let u=e(i,o);u===n.focus&&(u=-1),f(u)}}})``,t.onclick=(()=>{let e=t,l=e.getContext("2d");e.width=514,e.height=58,l.fillStyle="#000000",l.fillRect(0,0,e.width,1),l.fillRect(0,e.height-1,e.width,1);for(let a=0;a<e.width;a+=57)l.fillRect(a,0,1,e.height);for(let i=1,u=1;i<=9;i++)l.drawImage(c[i],u,1),u+=57;{let r=(()=>{let l=e.getBoundingClientRect(),t=l.left;return t})``,d=Math.ceil(e.clientWidth/9);return e=>{let l=e.pageX-r;l=Math.floor(l/d),l+=1,-1!==n.focus&&(n[n.focus]===l&&(l=0),o(n.focus,l),f(n.focus))}}})``,e()})})``;
(async()=>{"use strict";await self.mainPromise,delete self.mainPromise;{let{storage:s}=self["constant.js"],{drawMass:t,loadData:a}=self["function.js"];t(-1),s.load(),a()}})``;